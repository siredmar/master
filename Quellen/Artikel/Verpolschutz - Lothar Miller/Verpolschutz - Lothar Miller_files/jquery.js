            <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de" lang="de">
    <head>
        <title>Lothar Miller</title>
            <script type="text/javascript" src="/s9y/templates/jquery.js"></script>
    <script type="text/javascript">
    jQuery.noConflict();
    </script>

<link rel="SHORTCUT ICON" href="http://www.lothar-miller.de/fclef.ico" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="Powered-By" content="Serendipity v.1.7.8" />
        <link rel="alternate"  type="application/rss+xml" title="Lothar Miller RSS feed" href="http://www.lothar-miller.de/s9y/feeds/index.rss2" />
        <link rel="alternate"  type="application/x.atom+xml"  title="Lothar Miller Atom feed"  href="http://www.lothar-miller.de/s9y/feeds/atom.xml" />
                <!-- uncomment the line below if your site uses a favicon -->
        <!--   <link rel="shortcut icon" href="http://www.lothar-miller.de/s9y/favicon.ico" /> -->
        <!-- base styles needed for bulletproof -->
        <link rel="stylesheet" type="text/css" href="/s9y/templates/bulletproof/base.css" />
        <!-- style.css -->
        <link rel="stylesheet" type="text/css" href="http://www.lothar-miller.de/s9y/serendipity.css" />
        <!--[if IE 5]>
            <link rel="stylesheet" type="text/css" href="/s9y/templates/bulletproof/ie5.css" />
        <![endif]-->
        <!--[if IE 6]>
            <link rel="stylesheet" type="text/css" href="/s9y/templates/bulletproof/ie6.css" />
        <![endif]-->
        <!--[if IE 7]>
            <link rel="stylesheet" type="text/css" href="/s9y/templates/bulletproof/ie7.css" />
        <![endif]-->
        <!-- additional colorset stylesheet -->
        <link rel="stylesheet" type="text/css" href="/s9y/templates/bulletproof/blank_style.css" />                <style type="text/css">
            #serendipity_banner {
            background-image: url(/s9y/uploads/Top2.jpg);
            background-position: center center;
                            background-repeat: no-repeat;
            }
        </style>
                        <!-- print media stylesheet -->
        <link rel="stylesheet" type="text/css" href="/s9y/templates/bulletproof/print.css" media="print" />
        <!-- additional user stylesheet: this can be used to override selected styles -->
            </head>

    <body>


    <!-- #skiplinks: these are links used to navigate quickly in text-based browsers -->
    <!--             they are of little use in modern graphical browsers, so the are -->
    <!--             hidden using CSS                                                -->
    <div id="skiplinks">
        <ul>
            <li lang="en"><a href="#sbsitenav">Skip to site navigation</a></li>            <li lang="en"><a href="#content">Skip to blog entries</a></li>
            <li lang="en"><a href="http://www.lothar-miller.de/s9y/archives">Skip to archive page</a></li>
            <li lang="en"><a href="#serendipityLeftSideBar">Skip to left sidebar</a></li>                    </ul>
    </div>

    <!-- #wrapper: this wrapper div holds the actual blog content; it can be used to -->
    <!--           give the blog a width in px or % plus an additional max-width in  -->
    <!--           order to limit the width in high resolutions to limit the length  -->
    <!--           of a line                                                         -->
    <div id="wrapper">
        <div id="wrapper_top"></div>

        
        <!-- #serendipity_banner: this is the header area. it holds the blog title and   -->
        <!--                      description headlines                                  -->
        <div id="serendipity_banner">
            <h1><span class="visible"><a class="homelink1" href="http://www.lothar-miller.de/s9y/">Lothar Miller</a></span></h1>
            <h2><span class="invisible"><a class="homelink2" href="http://www.lothar-miller.de/s9y/">Elektronik und Musik</a></span></h2>
        </div>
        <div id="serendipity_below_banner"></div>

        
        <!-- this is the actual content of the blog, entries column plus one or two      -->
        <!-- sidebars, depending on how users configure their sidebar plugins            -->

        
        
        
                    <!-- case 4: 2 columns, left sidebar only -->
            <div id="serendipityLeftSideBar" class="twoside layout2sb_left">
                                    <!-- #sbsitenav: like #sitenav, but placed within the sidebar                    -->
                    <div id="sbsitenav" class="serendipitySideBarItem">
                        <h3 class="serendipitySideBarTitle"></h3>
                        <div class="serendipitySideBarContent">
                            <!-- the line below must remain as a single uninterrupted line to display correctly in ie6 -->
                            <ul><li class=" sbnavlink_first sbnavlink_last"><a href="/s9y/pages/kontakt.html" title="Kontakt">Kontakt</a></li></ul>
                        </div>
                        <div class="serendipitySideBarFooter"></div>
                    </div>
                                         <div class="serendipitySideBarItem container_serendipity_quicksearch_plugin">
                     <h3 class="serendipitySideBarTitle serendipity_quicksearch_plugin">Suche</h3>
                  <div class="serendipitySideBarContent"><form id="searchform" action="/s9y/index.php" method="get">
    <div>
        <input type="hidden" name="serendipity[action]" value="search" />
        <input type="hidden" name="serendipity[fullentry]" value="1" />
        <input type="text" id="serendipityQuickSearchTermField" name="serendipity[searchTerm]" size="13" />
        <input class="quicksearch_submit" type="submit" value="&gt;" name="serendipity[searchButton]" title="Los!" style="width: 2em;" />
    </div>
    <div id="LSResult" style="display: none;"><div id="LSShadow"></div></div>
</form>
</div>
         <div class="serendipitySideBarFooter"></div>
      </div>
            <div class="serendipitySideBarItem container_serendipity_categories_plugin">
                     <h3 class="serendipitySideBarTitle serendipity_categories_plugin">Kategorien</h3>
                  <div class="serendipitySideBarContent"><form action="http://www.lothar-miller.de/s9y/index.php?frontpage" method="post">
              <div id="serendipity_category_form_content"><ul id="serendipity_categories_list" style="list-style: none; margin: 0px; padding: 0px"><li class="category_depth0 category_7" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="7" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/7-Hardware.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/7-Hardware" title="Hardware" style="padding-left: 0px">Hardware</a></li>
<li class="category_depth1 category_30" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="30" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/30-Analogeingang.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/30-Analogeingang" title="Analogeingang" style="padding-left: 6px">Analogeingang</a></li>
<li class="category_depth1 category_14" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="14" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/14-Entkopplung.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/14-Entkopplung" title="Blockkondensator" style="padding-left: 6px">Entkopplung</a></li>
<li class="category_depth1 category_40" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="40" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/40-Layout-Schaltregler.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/40-Layout-Schaltregler" title="LM2676" style="padding-left: 6px">Layout Schaltregler</a></li>
<li class="category_depth1 category_15" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="15" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/15-PS2-Umschalter.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/15-PS2-Umschalter" title="PS2-Tastaturumschalter" style="padding-left: 6px">PS2-Umschalter</a></li>
<li class="category_depth1 category_33" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="33" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/33-Quarz.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/33-Quarz" title="Quarz" style="padding-left: 6px">Quarz</a></li>
<li class="category_depth1 category_13" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="13" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/13-RC-Glied-fuer-PWM.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/13-RC-Glied-fuer-PWM" title="RC-Glied für PWM" style="padding-left: 6px">RC-Glied für PWM</a></li>
<li class="category_depth1 category_17" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="17" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/17-SPI.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/17-SPI" title="SPI" style="padding-left: 6px">SPI</a></li>
<li class="category_depth1 category_39" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="39" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/39-Verpolschutz.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/39-Verpolschutz" title="Verpolschutz mit MOSFET" style="padding-left: 6px">Verpolschutz</a></li>
<li class="category_depth0 category_8" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="8" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/8-Musik.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/8-Musik" title="Musik" style="padding-left: 0px">Musik</a></li>
<li class="category_depth1 category_9" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="9" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/9-Instrumente.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/9-Instrumente" title="Instrumente" style="padding-left: 6px">Instrumente</a></li>
<li class="category_depth1 category_11" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="11" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/11-Stimmgeraet.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/11-Stimmgeraet" title="Tuner" style="padding-left: 6px">Stimmgerät</a></li>
<li class="category_depth1 category_10" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="10" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/10-Verstaerker.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/10-Verstaerker" title="AMP" style="padding-left: 6px">Verstärker</a></li>
<li class="category_depth0 category_2" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="2" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/2-Progr-Logik.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/2-Progr-Logik" title="CPLD/FPGA" style="padding-left: 0px">Progr. Logik</a></li>
<li class="category_depth1 category_3" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="3" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/3-CPLD.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/3-CPLD" title="CPLD" style="padding-left: 6px">CPLD</a></li>
<li class="category_depth2 category_49" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="49" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/49-RS232-IO.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/49-RS232-IO" title="RS232 IO" style="padding-left: 12px">RS232 IO</a></li>
<li class="category_depth2 category_26" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="26" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/26-SPI-Slave.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/26-SPI-Slave" title="SPI Slave" style="padding-left: 12px">SPI-Slave</a></li>
<li class="category_depth1 category_4" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="4" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/4-FPGA.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/4-FPGA" title="FPGA" style="padding-left: 6px">FPGA</a></li>
<li class="category_depth2 category_31" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="31" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/31-DDFS.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/31-DDFS" title="DDFS" style="padding-left: 12px">DDFS</a></li>
<li class="category_depth2 category_43" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="43" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/43-Konfiguration.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/43-Konfiguration" title="FPGA Configuration" style="padding-left: 12px">Konfiguration</a></li>
<li class="category_depth2 category_20" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="20" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/20-RAMFIFO.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/20-RAMFIFO" title="RAM und FIFO" style="padding-left: 12px">RAM/FIFO</a></li>
<li class="category_depth2 category_29" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="29" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/29-Ringoszillator.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/29-Ringoszillator" title="Ringoszillator" style="padding-left: 12px">Ringoszillator</a></li>
<li class="category_depth1 category_1" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="1" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/1-VHDL.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/1-VHDL" title="VHDL" style="padding-left: 6px">VHDL</a></li>
<li class="category_depth2 category_32" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="32" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/32-Arrays.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/32-Arrays" title="Arrays" style="padding-left: 12px">Arrays</a></li>
<li class="category_depth2 category_44" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="44" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/44-BCD-Umwandlung.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/44-BCD-Umwandlung" title="Binär codiertes Dezimalsystem" style="padding-left: 12px">BCD Umwandlung</a></li>
<li class="category_depth2 category_6" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="6" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/6-Clock-Enable.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/6-Clock-Enable" title="Clock Enable" style="padding-left: 12px">Clock Enable</a></li>
<li class="category_depth2 category_48" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="48" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/48-Code-Schnipsel.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/48-Code-Schnipsel" title="Snippets" style="padding-left: 12px">Code-Schnipsel</a></li>
<li class="category_depth2 category_56" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="56" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/56-DCF77.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/56-DCF77" title="DCF77" style="padding-left: 12px">DCF77</a></li>
<li class="category_depth2 category_35" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="35" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/35-Einsynchronisieren.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/35-Einsynchronisieren" title="Einsynchronisieren" style="padding-left: 12px">Einsynchronisieren</a></li>
<li class="category_depth2 category_46" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="46" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/46-Encoder.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/46-Encoder" title="Encoder" style="padding-left: 12px">Encoder</a></li>
<li class="category_depth2 category_5" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="5" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/5-Entprellung.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/5-Entprellung" title="Entprellung" style="padding-left: 12px">Entprellung</a></li>
<li class="category_depth2 category_18" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="18" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/18-Flankenerkennung.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/18-Flankenerkennung" title="Flankenerkennung" style="padding-left: 12px">Flankenerkennung</a></li>
<li class="category_depth2 category_37" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="37" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/37-FSM.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/37-FSM" title="State Maschine" style="padding-left: 12px">FSM</a></li>
<li class="category_depth2 category_34" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="34" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/34-Getakteter-Prozess.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/34-Getakteter-Prozess" title="Getakteter Prozess" style="padding-left: 12px">Getakteter Prozess</a></li>
<li class="category_depth2 category_52" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="52" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/52-Graycode-Umwandlung.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/52-Graycode-Umwandlung" title="Graycode" style="padding-left: 12px">Graycode Umwandlung</a></li>
<li class="category_depth2 category_36" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="36" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/36-Kombinatorische-Schleife.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/36-Kombinatorische-Schleife" title="Kombinatorische Schleife" style="padding-left: 12px">Kombinatorische Schleife</a></li>
<li class="category_depth2 category_38" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="38" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/38-LFSR.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/38-LFSR" title="Linear Feedback Shift Register" style="padding-left: 12px">LFSR</a></li>
<li class="category_depth2 category_16" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="16" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/16-Numeric_Std.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/16-Numeric_Std" title="Numeric_Std" style="padding-left: 12px">Numeric_Std</a></li>
<li class="category_depth2 category_55" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="55" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/55-PS2.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/55-PS2" title="PS2 Interface" style="padding-left: 12px">PS/2</a></li>
<li class="category_depth2 category_47" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="47" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/47-PWM.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/47-PWM" title="Pulsweitenmodulation" style="padding-left: 12px">PWM</a></li>
<li class="category_depth2 category_50" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="50" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/50-RC-5.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/50-RC-5" title="RC5 Fernbedienung" style="padding-left: 12px">RC-5</a></li>
<li class="category_depth2 category_24" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="24" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/24-Rechnen.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/24-Rechnen" title="Rechnen in VHDL" style="padding-left: 12px">Rechnen </a></li>
<li class="category_depth2 category_42" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="42" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/42-RS232.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/42-RS232" title="RS232" style="padding-left: 12px">RS232</a></li>
<li class="category_depth2 category_45" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="45" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/45-SPI-Master.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/45-SPI-Master" title="SPI Master" style="padding-left: 12px">SPI Master</a></li>
<li class="category_depth2 category_25" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="25" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/25-when-others.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/25-when-others" title="others" style="padding-left: 12px">when others</a></li>
<li class="category_depth1 category_41" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="41" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/41-Xilinx-ISE.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/41-Xilinx-ISE" title="Xilinx ISE" style="padding-left: 6px">Xilinx ISE</a></li>
<li class="category_depth0 category_12" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="12" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/12-Software.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/12-Software" title="Software" style="padding-left: 0px">Software</a></li>
<li class="category_depth1 category_54" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="54" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/54-Encoder.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/54-Encoder" title="Drehgeber mit Beschleunigung" style="padding-left: 6px">Encoder</a></li>
<li class="category_depth1 category_51" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="51" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/51-Fifo.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/51-Fifo" title="Ringpuffer" style="padding-left: 6px">Fifo</a></li>
<li class="category_depth1 category_21" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="21" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/21-Filter.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/21-Filter" title="RC-Filter in SW" style="padding-left: 6px">Filter</a></li>
<li class="category_depth1 category_53" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="53" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/53-Graycode.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/53-Graycode" title="Grayumwandlung" style="padding-left: 6px">Graycode</a></li>
<li class="category_depth1 category_22" style="display: block;"><input style="width: 15px" type="checkbox" name="serendipity[multiCat][]" value="22" /><a class="serendipity_xml_icon" href="/s9y/feeds/categories/22-Zeiten.rss"><img src="/s9y/templates/bulletproof/img/xml.gif" alt="XML" style="border: 0px" /></a> <a href="/s9y/categories/22-Zeiten" title="ti.Akt" style="padding-left: 6px">Zeiten</a></li>
</ul><div class="category_submit"><br /><input type="submit" name="serendipity[isMultiCat]" value="Los!" /></div><div class="category_link_all"><br /><a href="/s9y/index.php?frontpage" title="Alle Kategorien">Alle Kategorien</a></div></div></form></div>
         <div class="serendipitySideBarFooter"></div>
      </div>
            <div class="serendipitySideBarItem container_serendipity_calendar_plugin">
                     <h3 class="serendipitySideBarTitle serendipity_calendar_plugin">Kalender</h3>
                  <div class="serendipitySideBarContent"><table cellspacing="0" cellpadding="0" summary="this table is a calendar for the month of September, 2014" class="serendipity_calendar">
    <thead>
      <tr>
        <th id="back" scope="col" colspan="1" class="serendipity_calendarHeader" style="text-align: right">
                              <a title="Zurück" href="http://www.lothar-miller.de/s9y/archives/2014/08.html"><img alt="Zurück" src="/s9y/templates/bulletproof/img/back.png" width="12" height="12" /></a>
                           </th>

        <th id="month" scope="col" colspan="5" class="serendipity_calendarHeader" style="text-align: center">
            <b><a style="white-space: nowrap" href="http://www.lothar-miller.de/s9y/archives/2014/09.html">September '14</a></b>
        </th>

        <th id="forward" scope="col" colspan="1" class="serendipity_calendarHeader" style="text-align: left">
                                <a title="Vorwärts" href="http://www.lothar-miller.de/s9y/archives/2014/10.html"><img alt="Vorwärts" src="/s9y/templates/bulletproof/img/forward.png" width="12" height="12" /></a>
                            </th>
    </tr>

    <tr>
            <th id="Mo" scope="col" abbr="Montag" title="Montag" class="serendipity_weekDayName" align="center">Mo</th>
            <th id="Di" scope="col" abbr="Dienstag" title="Dienstag" class="serendipity_weekDayName" align="center">Di</th>
            <th id="Mi" scope="col" abbr="Mittwoch" title="Mittwoch" class="serendipity_weekDayName" align="center">Mi</th>
            <th id="Do" scope="col" abbr="Donnerstag" title="Donnerstag" class="serendipity_weekDayName" align="center">Do</th>
            <th id="Fr" scope="col" abbr="Freitag" title="Freitag" class="serendipity_weekDayName" align="center">Fr</th>
            <th id="Sa" scope="col" abbr="Samstag" title="Samstag" class="serendipity_weekDayName" align="center">Sa</th>
            <th id="So" scope="col" abbr="Sonntag" title="Sonntag" class="serendipity_weekDayName" align="center">So</th>
        </tr>
</thead>
<tfoot class="serendipity_calendarHeader">
<tr><td id="today" scope="col" colspan="7">Montag, 15. September 2014</td></tr>
</tfoot>
<tbody>
            <tr class="serendipity_calendar row1">
                    <td class="serendipity_calendarDay FirstRow FirstInRow">1</td>
                    <td class="serendipity_calendarDay FirstRow">2</td>
                    <td class="serendipity_calendarDay FirstRow">3</td>
                    <td class="serendipity_calendarDay FirstRow">4</td>
                    <td class="serendipity_calendarDay FirstRow">5</td>
                    <td class="serendipity_calendarDay FirstRow">6</td>
                    <td class="serendipity_calendarDay FirstRow LastInRow">7</td>
                </tr>
            <tr class="serendipity_calendar  row2">
                    <td class="serendipity_calendarDay FirstInRow">8</td>
                    <td class="serendipity_calendarDay ">9</td>
                    <td class="serendipity_calendarDay ">10</td>
                    <td class="serendipity_calendarDay ">11</td>
                    <td class="serendipity_calendarDay ">12</td>
                    <td class="serendipity_calendarDay ">13</td>
                    <td class="serendipity_calendarDay LastInRow">14</td>
                </tr>
            <tr class="serendipity_calendar  row3">
                    <td class="serendipity_calendarDay FirstInRow Today">15</td>
                    <td class="serendipity_calendarDay ">16</td>
                    <td class="serendipity_calendarDay ">17</td>
                    <td class="serendipity_calendarDay ">18</td>
                    <td class="serendipity_calendarDay ">19</td>
                    <td class="serendipity_calendarDay ">20</td>
                    <td class="serendipity_calendarDay LastInRow">21</td>
                </tr>
            <tr class="serendipity_calendar  row4">
                    <td class="serendipity_calendarDay FirstInRow">22</td>
                    <td class="serendipity_calendarDay ">23</td>
                    <td class="serendipity_calendarDay ">24</td>
                    <td class="serendipity_calendarDay ">25</td>
                    <td class="serendipity_calendarDay ">26</td>
                    <td class="serendipity_calendarDay ">27</td>
                    <td class="serendipity_calendarDay LastInRow">28</td>
                </tr>
            <tr class="serendipity_calendar  row5">
                    <td class="serendipity_calendarDay FirstInRow LastRow">29</td>
                    <td class="serendipity_calendarDay LastRow">30</td>
                    <td class="serendipity_calendarDay LastRow">&#160;</td>
                    <td class="serendipity_calendarDay LastRow">&#160;</td>
                    <td class="serendipity_calendarDay LastRow">&#160;</td>
                    <td class="serendipity_calendarDay LastRow">&#160;</td>
                    <td class="serendipity_calendarDay LastInRow LastRow">&#160;</td>
                </tr>
    </tbody>
</table>
</div>
         <div class="serendipitySideBarFooter"></div>
      </div>
            <div class="serendipitySideBarItem container_serendipity_superuser_plugin">
                     <h3 class="serendipitySideBarTitle serendipity_superuser_plugin">Verwaltung des Blogs</h3>
                  <div class="serendipitySideBarContent"><a href="/s9y/admin" rel="nofollow" title="Login">Login</a></div>
         <div class="serendipitySideBarFooter"></div>
      </div>
            <div class="serendipitySideBarItem container_serendipity_html_nugget_plugin">
                     <h3 class="serendipitySideBarTitle serendipity_html_nugget_plugin">Counter</h3>
                  <div class="serendipitySideBarContent">
<!-- Counter von http://fc.webmasterpro.de : dieser Code zeigt Seitenaufrufe an und zählt mit -->
<script id="fcScriptlothar.miller" src="http://fc.webmasterpro.de/counter.php?name=lothar.miller&show=h&style=bac&w=200&h=30&bgC=ffffff&p=0.0.false,03.50.0.0.0.100.20.0x003366,18.-100.-15,03.8" type="text/javascript"></script>
<noscript>&lt;div&gt;&lt;img src=&quot;http://fc.webmasterpro.de/as_noscript.php?name=lothar.miller&quot; alt=&quot;&quot; /&gt;&lt;/div&gt;</noscript>


</div>
         <div class="serendipitySideBarFooter"></div>
      </div>
                               </div>
            <div id="content" class="twomain layout2sb_content hfeed">
                <!-- CONTENT START -->
   <div class="serendipity_content_message"></div>

<!-- ENTRIES START -->


<div class="hentry serendipity_Entry_Date">
            <h3 class="serendipity_date"><abbr class="published" title="2014-05-15T06:20:11MEST">Donnerstag, 15. Mai 2014</abbr></h3>
    
                    <h4 class="entry-title serendipity_title"><a href="/s9y/archives/93-Binaer-nach-ASCII-Hexadezimaldarstellung.html" rel="bookmark">Binär nach ASCII - Hexadezimaldarstellung</a></h4>

        <div class="serendipity_entry serendipity_entry_author_Lothar-Miller ">

                                                <div class='serendipity_entryFooter belowtitle'>
                        
                        
                        
                        
                        
                        
                        

                        
                    </div>
                
                            
                            <span class="serendipity_entryIcon">
                                                                               </span>
              
            <div class="entry-content serendipity_entry_body">
                <p>Sollen Werte z.B. an ein Display oder über eine serielle Schnittstelle ausgegeben werden, dann kann eine hexadezimale Darstellung dieser Werte vorteilhaft sein. Bei der Hexadezimaldarstellung wird nämlich die Position der einzelnen Bits nicht verändert, byteorientierte Werte bleiben in Zweiergruppen beisammen und brauchen immer nur 2 ASCII Zeichen zur Darstellung.<br />Wenn man einen Binärwert wie &quot;01100011&quot; und &quot;01100100&quot; vergleicht, dann sieht man leicht, dass hier nicht so arg viel anders ist. Die zugehörigen Dezimalwerte 99 und 100 sind da augenscheinlich wesentlich unterschiedlicher: alle Zeichen haben sich geändert und es wird sogar eine zusätzliche Stelle benötigt. In der Hexadezimaldarstellung sieht es dagegen mit x&quot;63&quot; und x&quot;64&quot; wieder wesentlich entspannter aus: es ändert sich nicht die ganze Zahlendarstellung, sondern nur das niederwertigste Nibble.<br /> <br />Hier werden mehrere Lösungsmöglichkeiten für die Umwandlung einer 4 Bit breiten (Binär)zahl in einen ASCII-Wert aufgezeigt. <br /><br />Der Lösungsansatz bei der Addiererlösung ist folgender:<br /><br /><strong><font face="courier new,courier,monospace">Wenn <em>di </em>eine Zahl von 0..9 ist, dann addiere eine ASCII-0 dazu.<br />Wenn <em>di </em>eine Zahl von 10..15 ist, dann subtrahiere 10 und addiere ein ASCII-A dazu.</font></strong></p><hr width="100%" size="2" /> 
<pre><span style="color: rgb(0, 136, 0); font-weight: bold;">library</span> IEEE;
<span style="color: rgb(0, 136, 0); font-weight: bold;">use</span> IEEE.STD_LOGIC_1164.<span style="color: rgb(0, 136, 0); font-weight: bold;">ALL</span>;
<span style="color: rgb(0, 136, 0); font-weight: bold;">use</span> IEEE.NUMERIC_STD.<span style="color: rgb(0, 136, 0); font-weight: bold;">ALL</span>;

<span style="color: rgb(0, 136, 0); font-weight: bold;">entity</span> BCD2ASCII <span style="color: rgb(0, 136, 0); font-weight: bold;">is</span>
    <span style="color: rgb(0, 136, 0); font-weight: bold;">Port</span> ( di : <span style="color: rgb(0, 136, 0); font-weight: bold;">in</span>  <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC_VECTOR</span> (<span style="color: rgb(0, 0, 221); font-weight: bold;">3</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>);
           do : <span style="color: rgb(0, 136, 0); font-weight: bold;">out</span> <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC_VECTOR</span> (<span style="color: rgb(0, 0, 221); font-weight: bold;">7</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>));
<span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> BCD2ASCII;

<span style="color: rgb(136, 136, 136);">-- Direkte Beschreibung als Distributed BROM</span>
<span style="color: rgb(136, 136, 136);"></span><span style="color: rgb(136, 136, 136);">-- Maximum combinational path delay: 7.276ns</span>
<span style="color: rgb(136, 136, 136);">-- Number of Slices         3</span>
<span style="color: rgb(136, 136, 136);">-- Number of 4 input LUTs   6</span>
<span style="color: rgb(0, 136, 0); font-weight: bold;">architecture</span> Behavioral <span style="color: rgb(0, 136, 0); font-weight: bold;">of</span> BCD2ASCII <span style="color: rgb(0, 136, 0); font-weight: bold;">is</span>
   <span style="color: rgb(0, 136, 0); font-weight: bold;">type</span> Rom16x8 <span style="color: rgb(0, 136, 0); font-weight: bold;">is</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">array</span> (<span style="color: rgb(0, 0, 221); font-weight: bold;">0</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">to</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">15</span>) <span style="color: rgb(0, 136, 0); font-weight: bold;">of</span> <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span> (<span style="color: rgb(0, 0, 221); font-weight: bold;">7</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>);
   <span style="color: rgb(0, 136, 0); font-weight: bold;">constant</span> BCDRom : Rom16x8 := ( 
       <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);">'0'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)),
       <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'1'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)),
       <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'2'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)),
       <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'3'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)),
       <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'4'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)),
       <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'5'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)),
       <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'6'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)),
       <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos<span style="color: rgb(0, 68, 221);"></span>(<span style="color: rgb(0, 68, 221);">'7'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)),
       <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'8'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)),
       <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'9'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)),
       <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'A'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)),
       <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'B'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)),
       <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'C'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)),
       <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'D'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)),
       <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'E'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)),
       <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'F'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)));
<span style="color: rgb(0, 136, 0); font-weight: bold;">begin</span>
   do &lt;= BCDRom(to_integer(<span style="color: rgb(0, 119, 68); font-weight: bold;">unsigned</span>(di)));
<span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> Behavioral;</pre> 
<pre><span style="color: rgb(136, 136, 136);">-- Über eine when-else Anweisung --&gt; es wird ein Distributed BROM instatiiert</span>
<span style="color: rgb(136, 136, 136);"></span><span style="color: rgb(136, 136, 136);">-- Maximum combinational path delay: 7.276ns</span>
<span style="color: rgb(136, 136, 136);">-- Number of Slices         3</span>
<span style="color: rgb(136, 136, 136);">-- Number of 4 input LUTs   6</span>
<span style="color: rgb(0, 136, 0); font-weight: bold;">architecture</span> Behavioral <span style="color: rgb(0, 136, 0); font-weight: bold;">of</span> BCD2ASCII <span style="color: rgb(0, 136, 0); font-weight: bold;">is</span>
<span style="color: rgb(0, 136, 0); font-weight: bold;">begin</span>
     do &lt;= x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>30</span><span style="color: rgb(119, 17, 0);">"</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> di=x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>0</span><span style="color: rgb(119, 17, 0);">"</span></span>  <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  
           x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>31</span><span style="color: rgb(119, 17, 0);">"</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> di=x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>1</span><span style="color: rgb(119, 17, 0);">"</span></span>  <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  
           x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>32</span><span style="color: rgb(119, 17, 0);">"</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> di=x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>2</span><span style="color: rgb(119, 17, 0);">"</span></span>  <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  
           x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>33</span><span style="color: rgb(119, 17, 0);">"</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> di=x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>3</span><span style="color: rgb(119, 17, 0);">"</span></span>  <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  
           x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>34</span><span style="color: rgb(119, 17, 0);">"</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> di=x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>4</span><span style="color: rgb(119, 17, 0);">"</span></span>  <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  
           x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>35</span><span style="color: rgb(119, 17, 0);">"</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> di=x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>5</span><span style="color: rgb(119, 17, 0);">"</span></span>  <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  
           x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>36</span><span style="color: rgb(119, 17, 0);">"</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> di=x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>6</span><span style="color: rgb(119, 17, 0);">"</span></span>  <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  
           x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>37</span><span style="color: rgb(119, 17, 0);">"</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> di=x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>7</span><span style="color: rgb(119, 17, 0);">"</span></span>  <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  
           x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>38</span><span style="color: rgb(119, 17, 0);">"</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> di=x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>8</span><span style="color: rgb(119, 17, 0);">"</span></span>  <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  
           x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>39</span><span style="color: rgb(119, 17, 0);">"</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> di=x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>9</span><span style="color: rgb(119, 17, 0);">"</span></span>  <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  
           x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>41</span><span style="color: rgb(119, 17, 0);">"</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> di=x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>A</span><span style="color: rgb(119, 17, 0);">"</span></span>  <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  
           x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>42</span><span style="color: rgb(119, 17, 0);">"</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> di=x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>B</span><span style="color: rgb(119, 17, 0);">"</span></span>  <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  
           x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>43</span><span style="color: rgb(119, 17, 0);">"</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> di=x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>C</span><span style="color: rgb(119, 17, 0);">"</span></span>  <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  
           x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>44</span><span style="color: rgb(119, 17, 0);">"</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> di=x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>D</span><span style="color: rgb(119, 17, 0);">"</span></span>  <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  
           x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>45</span><span style="color: rgb(119, 17, 0);">"</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> di=x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>E</span><span style="color: rgb(119, 17, 0);">"</span></span>  <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  
           x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">"</span><span>46</span><span style="color: rgb(119, 17, 0);">"</span></span>;
<span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> Behavioral;</pre> 
<pre><span style="color: rgb(136, 136, 136);">-- Mit Addierer, die Konstate 10 wird direkt vom ASCII-Wert 'A' abgezogen (selbe Klammerebene)</span>
<span style="color: rgb(136, 136, 136);">-- Maximum combinational path delay: 7.276ns</span>
<span style="color: rgb(136, 136, 136);"></span><span style="color: rgb(136, 136, 136);">-- Number of Slices         3</span>
<span style="color: rgb(136, 136, 136);">-- Number of 4 input LUTs   6</span>
<span style="color: rgb(0, 136, 0); font-weight: bold;">architecture</span> Behavioral <span style="color: rgb(0, 136, 0); font-weight: bold;">of</span> BCD2ASCII <span style="color: rgb(0, 136, 0); font-weight: bold;">is</span>
<span style="color: rgb(0, 136, 0); font-weight: bold;">begin</span>
     do &lt;= <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(resize(<span style="color: rgb(0, 119, 68); font-weight: bold;">unsigned</span>(di),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)+to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'A'</span>)-<span style="color: rgb(0, 0, 221); font-weight: bold;">10</span>,<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>))  <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> <span style="color: rgb(0, 119, 68); font-weight: bold;">unsigned</span>(di)&gt;<span style="color: rgb(0, 0, 221); font-weight: bold;">9</span>  <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  
           <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(resize(<span style="color: rgb(0, 119, 68); font-weight: bold;">unsigned</span>(di),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)+to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'0'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>));
<span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> Behavioral;

<span style="color: rgb(136, 136, 136);">-- Wie vorher, die Konstate 10 wird aber auf einer anderen Klammerebene abgezogen --&gt; ein Subtrahierer wird instatiiert!</span>
<span style="color: rgb(136, 136, 136);"></span><span style="color: rgb(136, 136, 136);">-- Maximum combinational path delay: 10.471ns</span>
<span style="color: rgb(136, 136, 136);">-- Number of Slices         6</span>
<span style="color: rgb(136, 136, 136);">-- Number of 4 input LUTs   10</span>
<span style="color: rgb(136, 136, 136);">--architecture Behavioral of BCD2ASCII is</span>
<span style="color: rgb(0, 136, 0); font-weight: bold;">begin</span>
     do &lt;= <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(resize(<span style="color: rgb(0, 119, 68); font-weight: bold;">unsigned</span>(di),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)+to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'A'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)-<span style="color: rgb(0, 0, 221); font-weight: bold;">10</span>)  <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> <span style="color: rgb(0, 119, 68); font-weight: bold;">unsigned</span>(di)&gt;<span style="color: rgb(0, 0, 221); font-weight: bold;">9</span>  <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  
           <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(resize(<span style="color: rgb(0, 119, 68); font-weight: bold;">unsigned</span>(di),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>)+to_unsigned(<span style="color: rgb(0, 119, 68); font-weight: bold;">character</span>'pos(<span style="color: rgb(0, 68, 221);"></span><span style="color: rgb(0, 68, 221);">'0'</span>),<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span>));
<span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> Behavioral;
<span style="color: rgb(136, 136, 136);"></span></pre><hr width="100%" size="2" /> 
<p>Die ersten 3 Lösungen resultieren in gleichem Ressourcenverbrauch und in
 der selben Geschwindigkeit.<br /><br />Sehr interessant ist aber der Unterschied zwischen der (optisch fast gleichen) 3. und 4. Lösung. Dort wurde nur die <strong>Subtraktion der Konstante </strong>10 etwas verlegt, und XST fügt dann in die Hardware einen Subtrahierer ein. Dadurch wird das Design größer und langsamer!<br /></p>
                           </div>

            
                            
                                    </div>

        <!--
        <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                 xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
                 xmlns:dc="http://purl.org/dc/elements/1.1/">
        <rdf:Description
                 rdf:about="http://www.lothar-miller.de/s9y/feeds/ei_93.rdf"
                 trackback:ping="http://www.lothar-miller.de/s9y/comment.php?type=trackback&amp;entry_id=93"
                 dc:title="Binär nach ASCII - Hexadezimaldarstellung"
                 dc:identifier="http://www.lothar-miller.de/s9y/archives/93-Binaer-nach-ASCII-Hexadezimaldarstellung.html" />
        </rdf:RDF>
        -->
        

        
        
        
    </div>

<div class="hentry serendipity_Entry_Date">
            <h3 class="serendipity_date"><abbr class="published" title="2013-12-20T07:09:23MET">Freitag, 20. Dezember 2013</abbr></h3>
    
                    <h4 class="entry-title serendipity_title"><a href="/s9y/archives/91-Schalter-und-Bruecke.html" rel="bookmark">Schalter und Brücke</a></h4>

        <div class="serendipity_entry serendipity_entry_author_Lothar-Miller ">

                                                <div class='serendipity_entryFooter belowtitle'>
                        
                        
                        
                        
                        
                        
                        

                        
                    </div>
                
                            
                            <span class="serendipity_entryIcon">
                                                                               </span>
              
            <div class="entry-content serendipity_entry_body">
                
<p>Manchmal möchte man für eine VHDL Simulation einen Schalter beschreiben, oder man braucht eine Brücke, z.B. zum Verbinden von 2 Bussen. Hier kann dann der Code für das ZeroOhmModell von Ben Cohen weiterhelfen: <a title="Ben Cohens Zero Ohm Modell" target="_blank" href="http://systemverilog.us/zohm0_ea.vhd">Zero-Ohm Modell</a> und <a title="Ben Cohens Schaltermodell" target="_blank" href="http://systemverilog.us/switch1.vhd">Schaltermodell</a></p><p>Allerdings erscheint mir das Schaltermodell unnötig kompliziert, denn der Typ std_logic bringt seine Auflösungstabelle ja schon mit. Deshalb habe ich für den Schalter nur das Null-Ohm-Widerstandsmodell ein klein wenig überarbeitet und: es simuliert sich tadellos...</p><hr /><pre><span style="color: rgb(0, 136, 0); font-weight: bold;">library</span> IEEE;
<span style="color: rgb(0, 136, 0); font-weight: bold;">use</span> IEEE.STD_LOGIC_1164.<span style="color: rgb(0, 136, 0); font-weight: bold;">ALL</span>;

<span style="color: rgb(0, 136, 0); font-weight: bold;">entity</span> swbidi <span style="color: rgb(0, 136, 0); font-weight: bold;">is</span>
    <span style="color: rgb(0, 136, 0); font-weight: bold;">Port</span> ( A : <span style="color: rgb(0, 136, 0); font-weight: bold;">inout</span>  <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC</span>;
           B : <span style="color: rgb(0, 136, 0); font-weight: bold;">inout</span>  <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC</span>;
           I : <span style="color: rgb(0, 136, 0); font-weight: bold;">in</span>  <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC</span>);
<span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> swbidi;

<span style="color: rgb(0, 136, 0); font-weight: bold;">architecture</span> Behavioral <span style="color: rgb(0, 136, 0); font-weight: bold;">of</span> swbidi <span style="color: rgb(0, 136, 0); font-weight: bold;">is</span>
<span style="color: rgb(0, 136, 0); font-weight: bold;">begin</span>
  <span style="color: rgb(0, 136, 0); font-weight: bold;">process</span>
    <span style="color: rgb(0, 136, 0); font-weight: bold;">variable</span> thentime : <span style="color: rgb(0, 119, 68); font-weight: bold;">time</span>;
  <span style="color: rgb(0, 136, 0); font-weight: bold;">begin</span>
    <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">on</span> A, B, I <span style="color: rgb(0, 136, 0); font-weight: bold;">until</span> thentime /= now;
    
    <span style="color: rgb(136, 136, 136);">-- Break</span>
    thentime := now;
    A &lt;= <span style="color: rgb(0, 68, 221);">'Z'</span>;
    B &lt;= <span style="color: rgb(0, 68, 221);">'Z'</span>;
    <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span> ns;
    
    <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span> (I=<span style="color: rgb(0, 68, 221);">'1'</span>) <span style="color: rgb(0, 136, 0); font-weight: bold;">then</span> <span style="color: rgb(136, 136, 136);">-- No make if the switch is open</span>
      <span style="color: rgb(136, 136, 136);">-- Make</span>
      A &lt;= B;
      B &lt;= A;
    <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span>;
  <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">process</span>;

<span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> Behavioral;</pre><hr /><p>Hier der Code für die Simulation:</p><hr /><br /><pre><span style="color: rgb(0, 136, 0); font-weight: bold;">LIBRARY</span> ieee;
<span style="color: rgb(0, 136, 0); font-weight: bold;">USE</span> ieee.std_logic_1164.<span style="color: rgb(0, 136, 0); font-weight: bold;">ALL</span>;
 
<span style="color: rgb(0, 136, 0); font-weight: bold;">ENTITY</span> tb_swbidi <span style="color: rgb(0, 136, 0); font-weight: bold;">IS</span>
<span style="color: rgb(0, 136, 0); font-weight: bold;">END</span> tb_swbidi;
 
<span style="color: rgb(0, 136, 0); font-weight: bold;">ARCHITECTURE</span> behavior <span style="color: rgb(0, 136, 0); font-weight: bold;">OF</span> tb_swbidi <span style="color: rgb(0, 136, 0); font-weight: bold;">IS</span> 
    <span style="color: rgb(0, 136, 0); font-weight: bold;">COMPONENT</span> swbidi
    <span style="color: rgb(0, 136, 0); font-weight: bold;">PORT</span>(A : <span style="color: rgb(0, 136, 0); font-weight: bold;">INOUT</span>  <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic</span>;
         B : <span style="color: rgb(0, 136, 0); font-weight: bold;">INOUT</span>  <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic</span>;
         I : <span style="color: rgb(0, 136, 0); font-weight: bold;">IN</span>  <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic</span>);
    <span style="color: rgb(0, 136, 0); font-weight: bold;">END</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">COMPONENT</span>;
   <span style="color: rgb(0, 136, 0); font-weight: bold;">signal</span> I : <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic</span> := <span style="color: rgb(0, 68, 221);">'0'</span>;
   <span style="color: rgb(0, 136, 0); font-weight: bold;">signal</span> A : <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic</span> := <span style="color: rgb(0, 68, 221);">'Z'</span>;
   <span style="color: rgb(0, 136, 0); font-weight: bold;">signal</span> B : <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic</span> := <span style="color: rgb(0, 68, 221);">'Z'</span>;
<span style="color: rgb(0, 136, 0); font-weight: bold;">BEGIN</span>
   uut: swbidi <span style="color: rgb(0, 136, 0); font-weight: bold;">PORT</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">MAP</span> (
          A =&gt; A,
          B =&gt; B,
          I =&gt; I);

   <span style="color: rgb(0, 136, 0); font-weight: bold;">process</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">begin</span>    
      A &lt;= <span style="color: rgb(0, 68, 221);">'1'</span>;
      B &lt;= <span style="color: rgb(0, 68, 221);">'Z'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">10</span> ns;  
      A &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      B &lt;= <span style="color: rgb(0, 68, 221);">'Z'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">10</span> ns;  
      A &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      B &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">10</span> ns;  
      A &lt;= <span style="color: rgb(0, 68, 221);">'Z'</span>;
      B &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">10</span> ns;  
      A &lt;= <span style="color: rgb(0, 68, 221);">'Z'</span>;
      B &lt;= <span style="color: rgb(0, 68, 221);">'1'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">10</span> ns;  
      A &lt;= <span style="color: rgb(0, 68, 221);">'1'</span>;
      B &lt;= <span style="color: rgb(0, 68, 221);">'1'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">10</span> ns;  
      A &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      B &lt;= <span style="color: rgb(0, 68, 221);">'1'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">10</span> ns;  
      A &lt;= <span style="color: rgb(0, 68, 221);">'1'</span>;
      B &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">10</span> ns;  
      A &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      B &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">10</span> ns;  
      A &lt;= <span style="color: rgb(0, 68, 221);">'H'</span>;
      B &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">10</span> ns;  
      A &lt;= <span style="color: rgb(0, 68, 221);">'H'</span>;
      B &lt;= <span style="color: rgb(0, 68, 221);">'1'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">10</span> ns;  
      A &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      B &lt;= <span style="color: rgb(0, 68, 221);">'L'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">10</span> ns;  
      A &lt;= <span style="color: rgb(0, 68, 221);">'1'</span>;
      B &lt;= <span style="color: rgb(0, 68, 221);">'L'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">10</span> ns;  

      A &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      B &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">100</span> ns;  
   <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">process</span>;
   
   I &lt;= <span style="color: rgb(0, 136, 0); font-weight: bold;">not</span> I <span style="color: rgb(0, 136, 0); font-weight: bold;">after</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">5</span> ns;
<span style="color: rgb(0, 136, 0); font-weight: bold;">END</span>;</pre><hr /><p>Und so sieht das Ergebnis aus:</p><div class="serendipity_imageComment_center" style="width: 700px;"><div class="serendipity_imageComment_img"><a class="serendipity_image_link" href="/s9y/uploads/Bilder/Wave_SwitchBidirectional.png"><!-- s9ymdb:164 --><img width="700" height="84" class="serendipity_image_center" src="/s9y/uploads/Bilder/Wave_SwitchBidirectional.png" /></a></div><div class="serendipity_imageComment_txt">Eingangssignale a und b werden gesetzt und dann der Schalter geschlossen: STD_LOGIC löst Konflikte auf</div></div>







                           </div>

            
                            
                                    </div>

        <!--
        <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                 xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
                 xmlns:dc="http://purl.org/dc/elements/1.1/">
        <rdf:Description
                 rdf:about="http://www.lothar-miller.de/s9y/feeds/ei_91.rdf"
                 trackback:ping="http://www.lothar-miller.de/s9y/comment.php?type=trackback&amp;entry_id=91"
                 dc:title="Schalter und Brücke"
                 dc:identifier="http://www.lothar-miller.de/s9y/archives/91-Schalter-und-Bruecke.html" />
        </rdf:RDF>
        -->
        

        
        
        
                    <h4 class="entry-title serendipity_title"><a href="/s9y/archives/90-Ringoszillator.html" rel="bookmark">Ringoszillator</a></h4>

        <div class="serendipity_entry serendipity_entry_author_Lothar-Miller ">

                                                <div class='serendipity_entryFooter belowtitle'>
                        
                        
                        
                        
                        
                        
                        

                        
                    </div>
                
                            
                            <span class="serendipity_entryIcon">
                                                                               </span>
              
            <div class="entry-content serendipity_entry_body">
                
<p>Hier ein skalierbarer Ringoszillator. Der <i>reset </i>geht bei dieser variante nur auf die erste Stufe der Gatterkette. Wenn eine gerade Gatteranzahl ausgewählt wird, bricht die Synthese und der Simulator mit einer Fehlermeldung ab:</p><hr /><pre><span style="color: rgb(0, 136, 0); font-weight: bold;">library</span> IEEE;
<span style="color: rgb(0, 136, 0); font-weight: bold;">use</span> IEEE.STD_LOGIC_1164.<span style="color: rgb(0, 136, 0); font-weight: bold;">ALL</span>;

<span style="color: rgb(0, 136, 0); font-weight: bold;">entity</span> RingO <span style="color: rgb(0, 136, 0); font-weight: bold;">is</span>
    <span style="color: rgb(0, 136, 0); font-weight: bold;">Port</span> ( reset : <span style="color: rgb(0, 136, 0); font-weight: bold;">in</span>  <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC</span>; 
           fout  : <span style="color: rgb(0, 136, 0); font-weight: bold;">out</span> <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC</span>);
<span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> RingO;

<span style="color: rgb(0, 136, 0); font-weight: bold;">architecture</span> Behavioral <span style="color: rgb(0, 136, 0); font-weight: bold;">of</span> RingO <span style="color: rgb(0, 136, 0); font-weight: bold;">is</span>
  <span style="color: rgb(0, 136, 0); font-weight: bold;">signal</span> ring    : <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(<span style="color: rgb(0, 0, 221); font-weight: bold;">2</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>); <span style="color: rgb(136, 136, 136);">-- ungerade Bitanzahl</span>
<span style="color: rgb(136, 136, 136);">--  signal ring    : std_logic_vector(20 downto 0); -- ungerade Bitanzahl</span>
  attribute KEEP : <span style="color: rgb(0, 119, 68); font-weight: bold;">string</span>; 
  attribute KEEP <span style="color: rgb(0, 136, 0); font-weight: bold;">of</span> ring : <span style="color: rgb(0, 136, 0); font-weight: bold;">signal</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">is</span> <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>true</span><span style="color: rgb(119, 17, 0);">&quot;</span></span>; 
<span style="color: rgb(0, 136, 0); font-weight: bold;">begin</span>
  <span style="color: rgb(0, 136, 0); font-weight: bold;">assert</span> ring<span style="color: rgb(0, 68, 221);">'l</span>ength mod <span style="color: rgb(0, 0, 221); font-weight: bold;">2</span> = <span style="color: rgb(0, 0, 221); font-weight: bold;">1</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">report</span> <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>Length of ring must be an odd number!</span><span style="color: rgb(119, 17, 0);">&quot;</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">severity</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">failure</span>;

  <span style="color: rgb(0, 136, 0); font-weight: bold;">process</span> (ring,reset) <span style="color: rgb(0, 136, 0); font-weight: bold;">begin</span>
     <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> i <span style="color: rgb(0, 136, 0); font-weight: bold;">in</span> ring<span style="color: rgb(0, 68, 221);">'r</span>ange <span style="color: rgb(0, 136, 0); font-weight: bold;">loop</span>
       <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span> i = ring<span style="color: rgb(0, 68, 221);">'l</span>eft <span style="color: rgb(0, 136, 0); font-weight: bold;">then</span>
         <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span> reset=<span style="color: rgb(0, 68, 221);">'1'</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">then</span>
           ring(i) &lt;= <span style="color: rgb(0, 68, 221);">'1'</span>;
         <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>
           ring(i) &lt;= <span style="color: rgb(0, 136, 0); font-weight: bold;">not</span> ring(<span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>) <span style="color: rgb(0, 136, 0); font-weight: bold;">after</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">1</span>ns;
         <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span>;
       <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>
         ring(i)   &lt;= <span style="color: rgb(0, 136, 0); font-weight: bold;">not</span> ring(i+<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span>) <span style="color: rgb(0, 136, 0); font-weight: bold;">after</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">1</span>ns;
       <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span>;
     <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">loop</span>;
  <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">process</span>;

  fout &lt;= ring(<span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>);

<span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> Behavioral;</pre><hr />
<p>Bei der Simulation sieht man den Einfluss der Ringlänge. Hier sind es 3 Bit:</p><div class="serendipity_imageComment_center" style="width: 800px;"><div class="serendipity_imageComment_img"><a class="serendipity_image_link" href="/s9y/uploads/Bilder/Ringo_3Bit.png"><!-- s9ymdb:160 --><img width="800" height="79" class="serendipity_image_center" src="/s9y/uploads/Bilder/Ringo_3Bit.png" /></a></div><div class="serendipity_imageComment_txt">Ringlänge = 3 Bit</div></div><br />Mit 21 Bit Ringlänge ist die Frequenz deutlich niedriger:<p /><p /><div class="serendipity_imageComment_center" style="width: 800px;"><div class="serendipity_imageComment_img"><a class="serendipity_image_link" href="/s9y/uploads/Bilder/Ringo_21Bit.png"><!-- s9ymdb:161 --><img width="800" height="78" class="serendipity_image_center" src="/s9y/uploads/Bilder/Ringo_21Bit.png" /></a></div><div class="serendipity_imageComment_txt">Ringlänge = 21 Bit</div></div><p /><p>Das Attribut <i><b>Keep </b></i>muss wieder dafür sorgen, dass der Ring vom Synthesizer nicht auf 1 Gatter zurechtgestutzt wird:</p><div class="serendipity_imageComment_center" style="width: 650px;"><div class="serendipity_imageComment_img"><a class="serendipity_image_link" href="/s9y/uploads/Bilder/Ringo_21bit_no_keep.png"><!-- s9ymdb:163 --><img width="650" height="300" class="serendipity_image_center" src="/s9y/uploads/Bilder/Ringo_21bit_no_keep.png" /></a></div><div class="serendipity_imageComment_txt">Ohne &quot;Keep&quot; wird nur das erste Gatter in Hardware umgesetzt</div></div><p /><p /><div class="serendipity_imageComment_center" style="width: 400px;"><div class="serendipity_imageComment_img"><a class="serendipity_image_link" href="/s9y/uploads/Bilder/Ringo_21bit_keep.png"><!-- s9ymdb:162 --><img width="400" height="1200" class="serendipity_image_center" src="/s9y/uploads/Bilder/Ringo_21bit_keep.png" /></a></div><div class="serendipity_imageComment_txt">&quot;Keep&quot; sorgt dafür, dass alle 21 Gatterebenen implementiert werden</div></div><p>
</p>
                           </div>

            
                            
                                    </div>

        <!--
        <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                 xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
                 xmlns:dc="http://purl.org/dc/elements/1.1/">
        <rdf:Description
                 rdf:about="http://www.lothar-miller.de/s9y/feeds/ei_90.rdf"
                 trackback:ping="http://www.lothar-miller.de/s9y/comment.php?type=trackback&amp;entry_id=90"
                 dc:title="Ringoszillator"
                 dc:identifier="http://www.lothar-miller.de/s9y/archives/90-Ringoszillator.html" />
        </rdf:RDF>
        -->
        

        
        
        
    </div>

<div class="hentry serendipity_Entry_Date">
            <h3 class="serendipity_date"><abbr class="published" title="2013-10-09T07:49:27MEST">Mittwoch,  9. Oktober 2013</abbr></h3>
    
                    <h4 class="entry-title serendipity_title"><a href="/s9y/archives/89-BCD-nach-Binaer-wandeln.html" rel="bookmark">BCD nach Binär wandeln</a></h4>

        <div class="serendipity_entry serendipity_entry_author_Lothar-Miller ">

                                                <div class='serendipity_entryFooter belowtitle'>
                        
                        
                        
                        
                        
                        
                        

                        
                    </div>
                
                            
                            <span class="serendipity_entryIcon">
                                                                               </span>
              
            <div class="entry-content serendipity_entry_body">
                
<p>Eine Umwandlung von BCD nach Binär ist eigentlich recht einfach: man multipliziert jede BCD-Stelle mit ihrem dezimalen Stellenwert und summiert das Ganze dann auf. So ergibt sich z.B. folgende Rechnung:<br /><br />2173(bcd) = 2*1000 + 1*100 + 7*10 + 3*1 = 2173(dez) = 00001000_01111101(bin) = 087d(hex)<br /><br />Kurzer Einwurf: hier dürfte jedem auffallen, dass 2073(bcd) = 2073(dez) ist. Und das ist ja auch logisch, weil &quot;BCD&quot; ausgeschrieben &quot;Binär codiertes Dezimalsystem&quot; heißt.<br /><br />Soll nun die obige Rechnung aber in ein FPGA, dann ist es ziemlich ressourcenfressend, wenn die komplette Rechnung kombinatorisch erledigt werden muss. In diesem einfachen Fall oben wären schon 4 Multiplizierer und 4 Addierer nötig.<br /><br />Sinnvoller ist daher, die Wandlung schrittweise durchzuführen und pro BCD-Stelle einen Takt aufzuwenden. Dazu kann man die obige Rechnung so umstellen:<br /><br />2173(bcd) = (((2)*10 + 1)*10 + 7)*10) + 3 = 2173(dez) = 00001000_01111101(bin) = 087d(hex)<br /><br />Man sieht hier, dass pro Schritt immer nur die selbe und vor allem nur eine einzige Multiplikation nötig ist. Zusammen mit einer FSM basierend auf dem Index der Dezimalstelle könnte das dann so umgesetzt werden:</p><hr /><pre><span style="color: rgb(0, 136, 0); font-weight: bold;">library</span> IEEE;
<span style="color: rgb(0, 136, 0); font-weight: bold;">use</span> IEEE.STD_LOGIC_1164.<span style="color: rgb(0, 136, 0); font-weight: bold;">ALL</span>;
<span style="color: rgb(0, 136, 0); font-weight: bold;">use</span> IEEE.NUMERIC_STD.<span style="color: rgb(0, 136, 0); font-weight: bold;">ALL</span>;

<span style="color: rgb(0, 136, 0); font-weight: bold;">entity</span> BCD2BIN <span style="color: rgb(0, 136, 0); font-weight: bold;">is</span>
    <span style="color: rgb(0, 136, 0); font-weight: bold;">Generic</span> ( width : <span style="color: rgb(0, 119, 68); font-weight: bold;">integer</span> := <span style="color: rgb(0, 0, 221); font-weight: bold;">4</span> );
    <span style="color: rgb(0, 136, 0); font-weight: bold;">Port</span> ( BCD   : <span style="color: rgb(0, 136, 0); font-weight: bold;">in</span>   <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC_VECTOR</span> (width*<span style="color: rgb(0, 0, 221); font-weight: bold;">4</span>-<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>);
           BIN   : <span style="color: rgb(0, 136, 0); font-weight: bold;">out</span>  <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC_VECTOR</span> (width*<span style="color: rgb(0, 0, 221); font-weight: bold;">4</span>-<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>);
           Start : <span style="color: rgb(0, 136, 0); font-weight: bold;">in</span>   <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC</span>;
           Idle  : <span style="color: rgb(0, 136, 0); font-weight: bold;">out</span>   <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC</span>;
           Clk   : <span style="color: rgb(0, 136, 0); font-weight: bold;">in</span>   <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC</span>);
<span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> BCD2BIN;

<span style="color: rgb(0, 136, 0); font-weight: bold;">architecture</span> Behavioral <span style="color: rgb(0, 136, 0); font-weight: bold;">of</span> BCD2BIN <span style="color: rgb(0, 136, 0); font-weight: bold;">is</span>
<span style="color: rgb(0, 136, 0); font-weight: bold;">signal</span> idx : <span style="color: rgb(0, 119, 68); font-weight: bold;">integer</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">range</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">to</span> width-<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span> := <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>; <span style="color: rgb(136, 136, 136);">-- 0 = idle</span>
<span style="color: rgb(0, 136, 0); font-weight: bold;">signal</span> tmp : <span style="color: rgb(0, 119, 68); font-weight: bold;">unsigned</span> (width*<span style="color: rgb(0, 0, 221); font-weight: bold;">4</span>-<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>);
<span style="color: rgb(0, 136, 0); font-weight: bold;">begin</span>
   <span style="color: rgb(0, 136, 0); font-weight: bold;">process</span> 
   <span style="color: rgb(0, 136, 0); font-weight: bold;">begin</span>
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">until</span> rising_edge(Clk);
      <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span> (idx = <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>) <span style="color: rgb(0, 136, 0); font-weight: bold;">then</span> 
         <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span> (start=<span style="color: rgb(0, 68, 221);">'1'</span>) <span style="color: rgb(0, 136, 0); font-weight: bold;">then</span> 
            tmp &lt;= (<span style="color: rgb(0, 136, 0); font-weight: bold;">others</span>=&gt;<span style="color: rgb(0, 68, 221);">'0'</span>);
            tmp(<span style="color: rgb(0, 0, 221); font-weight: bold;">3</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>) &lt;= <span style="color: rgb(0, 119, 68); font-weight: bold;">unsigned</span>(BCD(width*<span style="color: rgb(0, 0, 221); font-weight: bold;">4</span>-<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> width*<span style="color: rgb(0, 0, 221); font-weight: bold;">4</span>-<span style="color: rgb(0, 0, 221); font-weight: bold;">4</span>));
            idx &lt;= width-<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span>;
         <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>
         tmp &lt;= resize(tmp*<span style="color: rgb(0, 0, 221); font-weight: bold;">10</span> + <span style="color: rgb(0, 119, 68); font-weight: bold;">unsigned</span>(BCD(idx*<span style="color: rgb(0, 0, 221); font-weight: bold;">4</span>-<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> idx*<span style="color: rgb(0, 0, 221); font-weight: bold;">4</span>-<span style="color: rgb(0, 0, 221); font-weight: bold;">4</span>)),tmp<span style="color: rgb(0, 68, 221);">'l</span>ength);
         idx &lt;= idx-<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span>;
   <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">process</span>;

   BIN &lt;= <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(tmp);
   Idle &lt;= <span style="color: rgb(0, 68, 221);">'1'</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> idx=<span style="color: rgb(0, 0, 221); font-weight: bold;">0</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span> <span style="color: rgb(0, 68, 221);">'0'</span>;
   
<span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> Behavioral;</pre><hr /><p><br /><br />Und hier eine kleine Testbench mit der passenden Waveform:</p><hr /><pre><span style="color: rgb(0, 136, 0); font-weight: bold;">LIBRARY</span> ieee;
<span style="color: rgb(0, 136, 0); font-weight: bold;">USE</span> ieee.std_logic_1164.<span style="color: rgb(0, 136, 0); font-weight: bold;">ALL</span>;
<span style="color: rgb(0, 136, 0); font-weight: bold;">USE</span> ieee.numeric_std.<span style="color: rgb(0, 136, 0); font-weight: bold;">ALL</span>;
 
<span style="color: rgb(0, 136, 0); font-weight: bold;">ENTITY</span> tb_BCD2BIN <span style="color: rgb(0, 136, 0); font-weight: bold;">IS</span>
<span style="color: rgb(0, 136, 0); font-weight: bold;">END</span> tb_BCD2BIN;
 
<span style="color: rgb(0, 136, 0); font-weight: bold;">ARCHITECTURE</span> behavior <span style="color: rgb(0, 136, 0); font-weight: bold;">OF</span> tb_BCD2BIN <span style="color: rgb(0, 136, 0); font-weight: bold;">IS</span> 
 
    <span style="color: rgb(0, 136, 0); font-weight: bold;">COMPONENT</span> BCD2BIN
    <span style="color: rgb(0, 136, 0); font-weight: bold;">PORT</span>(
         BCD : <span style="color: rgb(0, 136, 0); font-weight: bold;">IN</span>  <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(<span style="color: rgb(0, 0, 221); font-weight: bold;">15</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>);
         BIN : <span style="color: rgb(0, 136, 0); font-weight: bold;">OUT</span>  <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(<span style="color: rgb(0, 0, 221); font-weight: bold;">15</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>);
         Start : <span style="color: rgb(0, 136, 0); font-weight: bold;">IN</span>  <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic</span>;
         Idle : <span style="color: rgb(0, 136, 0); font-weight: bold;">OUT</span>  <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic</span>;
         Clk : <span style="color: rgb(0, 136, 0); font-weight: bold;">IN</span>  <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic</span>
        );
    <span style="color: rgb(0, 136, 0); font-weight: bold;">END</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">COMPONENT</span>;
    

   <span style="color: rgb(136, 136, 136);">--Inputs</span>
   <span style="color: rgb(0, 136, 0); font-weight: bold;">signal</span> BCD : <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(<span style="color: rgb(0, 0, 221); font-weight: bold;">15</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>) := (<span style="color: rgb(0, 136, 0); font-weight: bold;">others</span> =&gt; <span style="color: rgb(0, 68, 221);">'0'</span>);
   <span style="color: rgb(0, 136, 0); font-weight: bold;">signal</span> Start : <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic</span> := <span style="color: rgb(0, 68, 221);">'0'</span>;
   <span style="color: rgb(0, 136, 0); font-weight: bold;">signal</span> Clk : <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic</span> := <span style="color: rgb(0, 68, 221);">'0'</span>;

   <span style="color: rgb(136, 136, 136);">--Outputs</span>
   <span style="color: rgb(0, 136, 0); font-weight: bold;">signal</span> BIN : <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic_vector</span>(<span style="color: rgb(0, 0, 221); font-weight: bold;">15</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>);
   <span style="color: rgb(0, 136, 0); font-weight: bold;">signal</span> Idle : <span style="color: rgb(0, 119, 68); font-weight: bold;">std_logic</span>;

   <span style="color: rgb(136, 136, 136);">-- Clock period definitions</span>
   <span style="color: rgb(0, 136, 0); font-weight: bold;">constant</span> Clk_period : <span style="color: rgb(0, 119, 68); font-weight: bold;">time</span> := <span style="color: rgb(0, 0, 221); font-weight: bold;">10</span> ns;
 
<span style="color: rgb(0, 136, 0); font-weight: bold;">BEGIN</span>
 
  <span style="color: rgb(136, 136, 136);">-- Instantiate the Unit Under Test (UUT)</span>
   uut: BCD2BIN <span style="color: rgb(0, 136, 0); font-weight: bold;">PORT</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">MAP</span> (
          BCD =&gt; BCD,
          BIN =&gt; BIN,
          Start =&gt; Start,
          Idle =&gt; Idle,
          Clk =&gt; Clk
        );

   <span style="color: rgb(136, 136, 136);">-- Clock process definitions</span>
   Clk_process :<span style="color: rgb(0, 136, 0); font-weight: bold;">process</span>
   <span style="color: rgb(0, 136, 0); font-weight: bold;">begin</span>
    Clk &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
    <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> Clk_period/<span style="color: rgb(0, 0, 221); font-weight: bold;">2</span>;
    Clk &lt;= <span style="color: rgb(0, 68, 221);">'1'</span>;
    <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> Clk_period/<span style="color: rgb(0, 0, 221); font-weight: bold;">2</span>;
   <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">process</span>;
 

   <span style="color: rgb(136, 136, 136);">-- Stimulus process</span>
   stim_proc: <span style="color: rgb(0, 136, 0); font-weight: bold;">process</span>
   <span style="color: rgb(0, 136, 0); font-weight: bold;">begin</span>    
      BCD &lt;= x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>2173</span><span style="color: rgb(119, 17, 0);">&quot;</span></span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">30</span> ns;  
      start &lt;= <span style="color: rgb(0, 68, 221);">'1'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">30</span> ns;  
      start &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">until</span> Idle=<span style="color: rgb(0, 68, 221);">'1'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">130</span> ns;  

      BCD &lt;= x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>1023</span><span style="color: rgb(119, 17, 0);">&quot;</span></span>;
      start &lt;= <span style="color: rgb(0, 68, 221);">'1'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">30</span> ns;  
      start &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">until</span> Idle=<span style="color: rgb(0, 68, 221);">'1'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">130</span> ns;  

      BCD &lt;= x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>1024</span><span style="color: rgb(119, 17, 0);">&quot;</span></span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">30</span> ns;  
      start &lt;= <span style="color: rgb(0, 68, 221);">'1'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">30</span> ns;  
      start &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">until</span> Idle=<span style="color: rgb(0, 68, 221);">'1'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">130</span> ns;  

      BCD &lt;= x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>9999</span><span style="color: rgb(119, 17, 0);">&quot;</span></span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">30</span> ns;  
      start &lt;= <span style="color: rgb(0, 68, 221);">'1'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">30</span> ns;  
      start &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">until</span> Idle=<span style="color: rgb(0, 68, 221);">'1'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">130</span> ns;  

      BCD &lt;= x<span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>0000</span><span style="color: rgb(119, 17, 0);">&quot;</span></span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">30</span> ns;  
      start &lt;= <span style="color: rgb(0, 68, 221);">'1'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">30</span> ns;  
      start &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">until</span> Idle=<span style="color: rgb(0, 68, 221);">'1'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">for</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">130</span> ns;  

      <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span>;
   <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">process</span>;

<span style="color: rgb(0, 136, 0); font-weight: bold;">END</span>;</pre><hr /><p /><div class="serendipity_imageComment_center" style="width: 846px;"><div class="serendipity_imageComment_img"><!-- s9ymdb:159 --><img width="846" height="142" class="serendipity_image_center" src="/s9y/uploads/Bilder/BCD2BIN.png" /></div><div class="serendipity_imageComment_txt">In der Waveform sind die BCD Eingangsdaten erst binär und darunter hexadezimal dargestellt. <br />Das Ergebnis BIN ist einmal dezimal und zudem binär dargestellt.</div></div><p><br /><br />Aber es gibt immer noch Verbesserungspotential. Basierend auf der Formel <br /><font size="3"><b><font face="courier new,courier,monospace"><br />10x + y = 8x + 2x + y </font></b></font><br /><br />kann diese Multiplikation</p><pre>tmp &lt;= resize(tmp*<span style="color: rgb(0, 0, 221); font-weight: bold;">10</span>        + <span style="color: rgb(0, 119, 68); font-weight: bold;">unsigned</span>(BCD(idx*<span style="color: rgb(0, 0, 221); font-weight: bold;">4</span>-<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> idx*<span style="color: rgb(0, 0, 221); font-weight: bold;">4</span>-<span style="color: rgb(0, 0, 221); font-weight: bold;">4</span>)),tmp<span style="color: rgb(0, 68, 221);">'l</span>ength);</pre><p><br />durch eine Formelumstellung mit einer zusätzlichen Addition ersetzt werden:</p><pre>tmp &lt;= resize(tmp*<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span> + tmp*<span style="color: rgb(0, 0, 221); font-weight: bold;">2</span> + <span style="color: rgb(0, 119, 68); font-weight: bold;">unsigned</span>(BCD(idx*<span style="color: rgb(0, 0, 221); font-weight: bold;">4</span>-<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> idx*<span style="color: rgb(0, 0, 221); font-weight: bold;">4</span>-<span style="color: rgb(0, 0, 221); font-weight: bold;">4</span>)),tmp<span style="color: rgb(0, 68, 221);">'l</span>ength);</pre><p><br />Der Trick dabei: der Synthesizer erkennt, dass tmp*8 und tmp*2 keine wirklichen Multiplikationen sind, und kann diese Operationen durch ein simples Umverdrahten erledigen. Kurz: es ist kein Multiplizierer nötig, das Design kann schneller getaktet werden...
</p>




                           </div>

            
                            
                                    </div>

        <!--
        <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                 xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
                 xmlns:dc="http://purl.org/dc/elements/1.1/">
        <rdf:Description
                 rdf:about="http://www.lothar-miller.de/s9y/feeds/ei_89.rdf"
                 trackback:ping="http://www.lothar-miller.de/s9y/comment.php?type=trackback&amp;entry_id=89"
                 dc:title="BCD nach Binär wandeln"
                 dc:identifier="http://www.lothar-miller.de/s9y/archives/89-BCD-nach-Binaer-wandeln.html" />
        </rdf:RDF>
        -->
        

        
        
        
    </div>

<div class="hentry serendipity_Entry_Date">
            <h3 class="serendipity_date"><abbr class="published" title="2013-06-03T09:07:00MEST">Montag,  3. Juni 2013</abbr></h3>
    
                    <h4 class="entry-title serendipity_title"><a href="/s9y/archives/88-VHDL-vs.-Verilog-am-Beispiel-einer-Stoppuhr.html" rel="bookmark">VHDL vs. Verilog am Beispiel einer Stoppuhr</a></h4>

        <div class="serendipity_entry serendipity_entry_author_Lothar-Miller ">

                                                <div class='serendipity_entryFooter belowtitle'>
                        
                        
                        
                        
                        
                        
                        

                        
                    </div>
                
                            
                            <span class="serendipity_entryIcon">
                                                                               </span>
              
            <div class="entry-content serendipity_entry_body">
                
<p>Immer wieder taucht das Pseudoargument auf, VHDL sei zu &quot;akademisch&quot; und überaus &quot;aufgeplustert&quot; und &quot;geschwätzig&quot;. So auch in einem Thread auf <a title="Verilog vs. VHDL" target="_blank" href="http://www.mikrocontroller.net/topic/291430#3103051">mikrocontroller.net: SPLD (GAL) - welche Software</a>. Dort wird auf die Implementierung einer Stoppuhr in Verilog auf <a title="Verilog Stoppuhr" target="_blank" href="http://simplefpga.blogspot.de/2012/07/to-code-stopwatch-in-verilog.html">simplefpga.blogspot.de Learn Verilog by Example</a> verwisen und impliziert, eine solch kompakte Lösung sei mit VHDL wohl nicht möglich.<br /><br />Ich habe mich der Sache mal angenommen und die dort vorgestellte Stoppuhr nach VHDL übertragen. Resultat: 90 Zeilen VHDL vs. 140 Zeilen Verilog... </p><hr /><pre><span style="color: rgb(0, 136, 0); font-weight: bold;">library</span> IEEE;
<span style="color: rgb(0, 136, 0); font-weight: bold;">use</span> IEEE.STD_LOGIC_1164.<span style="color: rgb(0, 136, 0); font-weight: bold;">ALL</span>;
<span style="color: rgb(0, 136, 0); font-weight: bold;">use</span> IEEE.NUMERIC_STD.<span style="color: rgb(0, 136, 0); font-weight: bold;">ALL</span>;

<span style="color: rgb(0, 136, 0); font-weight: bold;">entity</span> stopwatch <span style="color: rgb(0, 136, 0); font-weight: bold;">is</span>
    <span style="color: rgb(0, 136, 0); font-weight: bold;">Port</span> ( clock    : <span style="color: rgb(0, 136, 0); font-weight: bold;">in</span>  <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC</span>;
           reset    : <span style="color: rgb(0, 136, 0); font-weight: bold;">in</span>  <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC</span>;
           start    : <span style="color: rgb(0, 136, 0); font-weight: bold;">in</span>  <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC</span>;
           segments : <span style="color: rgb(0, 136, 0); font-weight: bold;">out</span> <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC_VECTOR</span> (<span style="color: rgb(0, 0, 221); font-weight: bold;">6</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>); <span style="color: rgb(136, 136, 136);">-- a, b, c, d, e, f, g</span>
           dp       : <span style="color: rgb(0, 136, 0); font-weight: bold;">out</span> <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC</span>;
           an       : <span style="color: rgb(0, 136, 0); font-weight: bold;">out</span> <span style="color: rgb(0, 119, 68); font-weight: bold;">STD_LOGIC_VECTOR</span> (<span style="color: rgb(0, 0, 221); font-weight: bold;">3</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>));
<span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> stopwatch;

<span style="color: rgb(0, 136, 0); font-weight: bold;">architecture</span> Behavioral <span style="color: rgb(0, 136, 0); font-weight: bold;">of</span> stopwatch <span style="color: rgb(0, 136, 0); font-weight: bold;">is</span>

<span style="color: rgb(136, 136, 136);">-- minutes, ten seconds, seconds, tenth seconds, the current digit </span>
<span style="color: rgb(0, 136, 0); font-weight: bold;">signal</span> m, s10, s1, st, digit : <span style="color: rgb(0, 119, 68); font-weight: bold;">integer</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">range</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">to</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">9</span> := <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>; 
<span style="color: rgb(136, 136, 136);">-- divides 50MHz to 0.1 sec: 0 to 4999999 are exactly 5000000 clocks</span>
<span style="color: rgb(0, 136, 0); font-weight: bold;">signal</span> prescaler : <span style="color: rgb(0, 119, 68); font-weight: bold;">integer</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">range</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">to</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">4999999</span> := <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>;
<span style="color: rgb(136, 136, 136);">-- the counter for the multiplexer with automatic overflow</span>
<span style="color: rgb(0, 136, 0); font-weight: bold;">signal</span> muxcnt : <span style="color: rgb(0, 119, 68); font-weight: bold;">unsigned</span> (<span style="color: rgb(0, 0, 221); font-weight: bold;">17</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>) := (<span style="color: rgb(0, 136, 0); font-weight: bold;">others</span>=&gt;<span style="color: rgb(0, 68, 221);">'0'</span>); 

<span style="color: rgb(0, 136, 0); font-weight: bold;">begin</span>
  <span style="color: rgb(136, 136, 136);">-- the stopwatch</span>
  <span style="color: rgb(0, 136, 0); font-weight: bold;">process</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">begin</span>
    <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">until</span> rising_edge(clock);
    <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span> prescaler&lt;<span style="color: rgb(0, 0, 221); font-weight: bold;">4999999</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">then</span> <span style="color: rgb(136, 136, 136);">-- count a tenth second</span>
      <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span> start = <span style="color: rgb(0, 68, 221);">'1'</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">then</span>     <span style="color: rgb(136, 136, 136);">-- but only if enabled</span>
        prescaler &lt;= prescaler+<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span>;
    <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>
      prescaler &lt;= <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span> st=<span style="color: rgb(0, 0, 221); font-weight: bold;">9</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">then</span> 
        st &lt;= <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>;
        <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span> s1=<span style="color: rgb(0, 0, 221); font-weight: bold;">9</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">then</span> 
          s1 &lt;= <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>;
          <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span> s10=<span style="color: rgb(0, 0, 221); font-weight: bold;">5</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">then</span> 
            s10 &lt;= <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>;
            <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span> m=<span style="color: rgb(0, 0, 221); font-weight: bold;">9</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">then</span> m &lt;= <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>;
            <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  m &lt;= m+<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span>;
            <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span>;
          <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  s10 &lt;= s10+<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span>;
          <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span>;
        <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  s1 &lt;= s1+<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span>;
        <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>  st &lt;= st+<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span>;
    <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span>;
    <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span> reset = <span style="color: rgb(0, 68, 221);">'1'</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">then</span> <span style="color: rgb(136, 136, 136);">-- last assignment in process &quot;wins&quot;</span>
      prescaler &lt;= <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>;   <span style="color: rgb(136, 136, 136);">-- --&gt;reset has priority </span>
      st &lt;= <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>;
      s1 &lt;= <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>;
      s10 &lt;= <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>;
      m &lt;= <span style="color: rgb(0, 0, 221); font-weight: bold;">0</span>;
    <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span>;
  <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">process</span>;
  
  <span style="color: rgb(136, 136, 136);">-- the muxer</span>
  <span style="color: rgb(0, 136, 0); font-weight: bold;">process</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">begin</span>
    <span style="color: rgb(0, 136, 0); font-weight: bold;">wait</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">until</span> rising_edge(clock);
    muxcnt &lt;= muxcnt+<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span>;
    <span style="color: rgb(0, 136, 0); font-weight: bold;">case</span> muxcnt(<span style="color: rgb(0, 0, 221); font-weight: bold;">17</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">downto</span> <span style="color: rgb(0, 0, 221); font-weight: bold;">16</span>) <span style="color: rgb(0, 136, 0); font-weight: bold;">is</span>
      <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>00</span><span style="color: rgb(119, 17, 0);">&quot;</span></span> =&gt; digit &lt;= st;
                   an    &lt;= <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>1110</span><span style="color: rgb(119, 17, 0);">&quot;</span></span>;
                   dp    &lt;= <span style="color: rgb(0, 68, 221);">'1'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>01</span><span style="color: rgb(119, 17, 0);">&quot;</span></span> =&gt; digit &lt;= s1;
                   an    &lt;= <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>1101</span><span style="color: rgb(119, 17, 0);">&quot;</span></span>;
                   dp    &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>10</span><span style="color: rgb(119, 17, 0);">&quot;</span></span> =&gt; digit &lt;= s10;
                   an    &lt;= <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>1011</span><span style="color: rgb(119, 17, 0);">&quot;</span></span>;
                   dp    &lt;= <span style="color: rgb(0, 68, 221);">'1'</span>;
      <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">others</span> =&gt; digit &lt;= m;
                   an    &lt;= <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>0111</span><span style="color: rgb(119, 17, 0);">&quot;</span></span>;
                   dp    &lt;= <span style="color: rgb(0, 68, 221);">'0'</span>;
     <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">case</span>;
     <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span> reset = <span style="color: rgb(0, 68, 221);">'1'</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">then</span> <span style="color: rgb(136, 136, 136);">-- when in reset</span>
       an    &lt;= <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>1111</span><span style="color: rgb(119, 17, 0);">&quot;</span></span>;  <span style="color: rgb(136, 136, 136);">-- switch off all segments</span>
     <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span>;
  <span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">process</span>;
              
  <span style="color: rgb(136, 136, 136);">-- the decoder</span>
  segments &lt;= <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>1000000</span><span style="color: rgb(119, 17, 0);">&quot;</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> digit=<span style="color: rgb(0, 0, 221); font-weight: bold;">0</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>
              <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>1111001</span><span style="color: rgb(119, 17, 0);">&quot;</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> digit=<span style="color: rgb(0, 0, 221); font-weight: bold;">1</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>
              <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>0100100</span><span style="color: rgb(119, 17, 0);">&quot;</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> digit=<span style="color: rgb(0, 0, 221); font-weight: bold;">2</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>
              <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>0110000</span><span style="color: rgb(119, 17, 0);">&quot;</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> digit=<span style="color: rgb(0, 0, 221); font-weight: bold;">3</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>
              <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>0011001</span><span style="color: rgb(119, 17, 0);">&quot;</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> digit=<span style="color: rgb(0, 0, 221); font-weight: bold;">4</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>
              <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>0010010</span><span style="color: rgb(119, 17, 0);">&quot;</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> digit=<span style="color: rgb(0, 0, 221); font-weight: bold;">5</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>
              <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>0000010</span><span style="color: rgb(119, 17, 0);">&quot;</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> digit=<span style="color: rgb(0, 0, 221); font-weight: bold;">6</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>
              <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>1111000</span><span style="color: rgb(119, 17, 0);">&quot;</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> digit=<span style="color: rgb(0, 0, 221); font-weight: bold;">7</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>
              <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>0000000</span><span style="color: rgb(119, 17, 0);">&quot;</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> digit=<span style="color: rgb(0, 0, 221); font-weight: bold;">8</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>
              <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>0010000</span><span style="color: rgb(119, 17, 0);">&quot;</span></span> <span style="color: rgb(0, 136, 0); font-weight: bold;">when</span> digit=<span style="color: rgb(0, 0, 221); font-weight: bold;">9</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">else</span>
              <span style="background-color: rgb(255, 240, 240); color: rgb(221, 34, 0);"><span style="color: rgb(119, 17, 0);">&quot;</span><span>0111111</span><span style="color: rgb(119, 17, 0);">&quot;</span></span>; <span style="color: rgb(136, 136, 136);">-- is a dash, but will hopefully never be used!</span>
              
<span style="color: rgb(0, 136, 0); font-weight: bold;">end</span> Behavioral;</pre><hr />
<p>
<br /> Hier noch ein Beispiel, wie man es mit SystemVerilog machen könnte:<br /> <a name="3188773" href="https://www.mikrocontroller.net/topic/298305#3188773">mikrocontroller.net: Beitrag &quot;Frage zur Lernkurve VHDL vs. Verilog&quot;</a></p>


                           </div>

            
                            
                                    </div>

        <!--
        <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                 xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
                 xmlns:dc="http://purl.org/dc/elements/1.1/">
        <rdf:Description
                 rdf:about="http://www.lothar-miller.de/s9y/feeds/ei_88.rdf"
                 trackback:ping="http://www.lothar-miller.de/s9y/comment.php?type=trackback&amp;entry_id=88"
                 dc:title="VHDL vs. Verilog am Beispiel einer Stoppuhr"
                 dc:identifier="http://www.lothar-miller.de/s9y/archives/88-VHDL-vs.-Verilog-am-Beispiel-einer-Stoppuhr.html" />
        </rdf:RDF>
        -->
        

        
        
        
    </div>


<div class='serendipity_pageFooter' style="text-align: center">
    
            (Seite 1 von 18, insgesamt 88 Einträge)
    
                                        <a title="nächste Seite" href="http://www.lothar-miller.de/s9y/templates/jquery/P2.html">nächste Seite<img alt="nächste Seite" title="nächste Seite" src="/s9y/templates/bulletproof/img/forward.png" /></a>
                        
    
    
</div>
<!-- ENTRIES END -->


<!-- CONTENT END -->

            </div>
        
        
        
        
        
        <!-- #footer: the page footer can be used for additional information             -->
        <div id="footer">
                            <p>Lothar Miller / Am Bläsistock 8 / 88483 Rot / <a target="_self" href="mailto:Lothar@Lothar-Miller.de">Lothar@Lothar-Miller.de</a></p>
            
            <!-- ************************************************************** -->
            <!-- The image and link below must remain if you use this template  -->
            <!-- or create your own template based on the bulletproof framework -->
            <!-- ************************************************************** -->

            <div id="serendipity_bulletproof_button"><a href="http://s9y-bulletproof.com" title="Based on the s9y Bulletproof template framework"><img src="/s9y/templates/bulletproof/img/bulletproof_button.png" alt="Based on the s9y Bulletproof template framework" width="100" height="28" /></a></div>

            <!-- ************************************************************** -->
            <!-- Feel free to insert your own "Template by" name and link below -->
            <!-- if you create a custom template based on bulletproof.          -->
            <!-- ************************************************************** -->

            <div id="serendipity_credit_line">Powered by <a href="http://www.s9y.org">s9y</a> &ndash; Template by <a href="http://s9y-bulletproof.com">Bulletproof development team</a>.<br /></div>
            
                        <!-- option to display navigation links in the footer                            -->
                    </div>
        <div id="wrapper_footer"></div>
    </div>



<!--PLUGIN API-->
    </body>
    </html>
